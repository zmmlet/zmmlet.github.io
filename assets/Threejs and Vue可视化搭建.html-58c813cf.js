import{_ as n,Q as s,S as a,a7 as t}from"./framework-ca2498c6.js";const e={},p=t(`<h1 id="vue-threejs-web-可视化搭建" tabindex="-1"><a class="header-anchor" href="#vue-threejs-web-可视化搭建" aria-hidden="true">#</a> Vue + Threejs Web 可视化搭建</h1><h2 id="项目背景" tabindex="-1"><a class="header-anchor" href="#项目背景" aria-hidden="true">#</a> 项目背景</h2><p>因旧项目升级改造需要，加以 WebGL 和元宇宙概念兴起，经过技术讨论最用采用 Vue + Threejs 技术栈对项目进行重新编写，此篇笔记只记录 Three.js 相关代码示例。项目配置相关和请求封装等不做介绍。</p><h2 id="项目创建" tabindex="-1"><a class="header-anchor" href="#项目创建" aria-hidden="true">#</a> 项目创建</h2><div class="hint-container tip"><p class="hint-container-title">提示</p><ul><li>Node.js v14.18.1 、yarn v1.22.17、@vue/cli 4.5.15、three.js 141.0 Vue2</li></ul></div><h3 id="使用-vuecli-创建项目" tabindex="-1"><a class="header-anchor" href="#使用-vuecli-创建项目" aria-hidden="true">#</a> 使用 vueCLI 创建项目</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vue create three-project
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="初始化画布" tabindex="-1"><a class="header-anchor" href="#初始化画布" aria-hidden="true">#</a> 初始化画布</h3><ol><li>安装 three.js 依赖包 <code>yarn add three</code></li><li>初始化画布，实现基础场景创建<a href="#%E5%9F%BA%E7%A1%80%E5%9C%BA%E6%99%AF%E5%88%9B%E5%BB%BA">基础场景创建</a></li></ol><h2 id="项目实现效果" tabindex="-1"><a class="header-anchor" href="#项目实现效果" aria-hidden="true">#</a> 项目实现效果</h2><h3 id="基础场景创建" tabindex="-1"><a class="header-anchor" href="#基础场景创建" aria-hidden="true">#</a> 基础场景创建</h3><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  Scene<span class="token punctuation">,</span>
  Color<span class="token punctuation">,</span>
  Fog<span class="token punctuation">,</span>
  PerspectiveCamera<span class="token punctuation">,</span>
  AxesHelper<span class="token punctuation">,</span>
  BoxGeometry<span class="token punctuation">,</span>
  MeshStandardMaterial<span class="token punctuation">,</span>
  Mesh<span class="token punctuation">,</span>
  AmbientLight<span class="token punctuation">,</span>
  PointLight<span class="token punctuation">,</span>
  WebGLRenderer<span class="token punctuation">,</span>
  sRGBEncoding
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;three&#39;</span>
<span class="token comment">// 引入鼠标控制（旋转、缩放）</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> OrbitControls <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;three/examples/jsm/controls/OrbitControls.js&#39;</span>
<span class="token keyword">let</span> scene<span class="token punctuation">,</span> renderer<span class="token punctuation">,</span> camera
<span class="token keyword">let</span> ambient<span class="token punctuation">,</span> point
<span class="token keyword">let</span> controls
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;base_scene&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>

      <span class="token comment">/* 创建场景 */</span>
      scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      scene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0x443333</span><span class="token punctuation">)</span>
      <span class="token comment">// 雾化，简单的说：场景中越远的位置看起</span>
      scene<span class="token punctuation">.</span>fog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fog</span><span class="token punctuation">(</span><span class="token number">0x443333</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1800</span><span class="token punctuation">)</span>

      <span class="token comment">/* 创建相机 */</span>
      camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerspectiveCamera</span><span class="token punctuation">(</span>
        <span class="token number">120</span><span class="token punctuation">,</span>
        window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span>
        <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token number">1000</span>
      <span class="token punctuation">)</span>
      camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">400</span>
      camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">200</span>
      camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">100</span>

      <span class="token comment">/* 创建灯光 */</span>
      _this<span class="token punctuation">.</span><span class="token function">createLightingHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// 添加坐标系参考</span>
      scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AxesHelper</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token comment">// 添加立方体</span>
      <span class="token keyword">let</span> geometry<span class="token punctuation">,</span> material<span class="token punctuation">,</span> mesh
      geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxGeometry</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
      material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;green&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.25</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span>
      mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>

      <span class="token comment">// 创建场景渲染器</span>
      _this<span class="token punctuation">.</span><span class="token function">rendererHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// 添加鼠标控制器</span>
      _this<span class="token punctuation">.</span><span class="token function">controlsHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">//窗口大小变化监听</span>
      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 创建灯光</span>
    <span class="token function">createLightingHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ambient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">//环境光</span>
      ambient<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">//点光源位置</span>
      scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambient<span class="token punctuation">)</span>

      point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">//光源设置</span>
      point<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">//点光源位置</span>
      scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span> <span class="token comment">//将光源添加到场景中</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 渲染场景</span>
    <span class="token function">rendererHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// alpha: true</span>
      renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span>
      renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span>
      renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span>
      renderer<span class="token punctuation">.</span>outputEncoding <span class="token operator">=</span> sRGBEncoding
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;demo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 鼠标控制器</span>
    <span class="token function">controlsHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrbitControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span>
      controls<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token comment">// controls.maxDistance = 600 // 最大缩放</span>
      <span class="token comment">// controls.minDistance = -35 // 最小缩放</span>
      <span class="token comment">//上下翻转的最大角度，地面的法线方向</span>
      <span class="token comment">// controls.maxPolarAngle = 1.5</span>
      <span class="token comment">//上下翻转的最小角度，接近地面的角度</span>
      <span class="token comment">// controls.minPolarAngle = 0.3</span>
      controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 添加动画</span>
    <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>animate<span class="token punctuation">)</span>

      controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 监听窗口大小</span>
    <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      camera<span class="token punctuation">.</span>aspect <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight
      camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 渲染窗口大小</span>
      renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 销毁方法</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.demo-box</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.adsorb-top</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>32<span class="token punctuation">,</span> 83<span class="token punctuation">,</span> 131<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.125rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="加载模型" tabindex="-1"><a class="header-anchor" href="#加载模型" aria-hidden="true">#</a> 加载模型</h3><h4 id="加载-fbx-模型" tabindex="-1"><a class="header-anchor" href="#加载-fbx-模型" aria-hidden="true">#</a> 加载 FBX 模型</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FBXLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;three/examples/jsm/loaders/FBXLoader.js&#39;</span>
<span class="token comment">// ....</span>
<span class="token comment">// 初始化模型加载器</span>
<span class="token keyword">let</span> fbxloader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FBXLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
fbxloader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&#39;models/测试模型.fbx&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">fbx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fbx<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> item<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> item<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token comment">// 模型位置</span>
  fbx<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">)</span> <span class="token comment">// 模型缩放</span>
  fbx<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> item<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token comment">// 模型旋转</span>
  fbx<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> item<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token comment">// 模型旋转</span>
  scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fbx<span class="token punctuation">)</span> <span class="token comment">// 添加fbx模型到场景中</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//....</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="合并-mesh-对象" tabindex="-1"><a class="header-anchor" href="#合并-mesh-对象" aria-hidden="true">#</a> 合并 mesh 对象</h4><h3 id="地面反射" tabindex="-1"><a class="header-anchor" href="#地面反射" aria-hidden="true">#</a> 地面反射</h3><h4 id="后期合成地面漫反射" tabindex="-1"><a class="header-anchor" href="#后期合成地面漫反射" aria-hidden="true">#</a> 后期合成地面漫反射</h4><h4 id="添加镜子反射物体" tabindex="-1"><a class="header-anchor" href="#添加镜子反射物体" aria-hidden="true">#</a> 添加镜子反射物体</h4><h2 id="项目总结" tabindex="-1"><a class="header-anchor" href="#项目总结" aria-hidden="true">#</a> 项目总结</h2><h3 id="模型对接问题" tabindex="-1"><a class="header-anchor" href="#模型对接问题" aria-hidden="true">#</a> 模型对接问题</h3><h3 id="材质渲染器" tabindex="-1"><a class="header-anchor" href="#材质渲染器" aria-hidden="true">#</a> 材质渲染器</h3><p>三维软件内的材质和 threejs 的材质不一致问题</p><h3 id="webstock-实时更新-createlabel-创建标签" tabindex="-1"><a class="header-anchor" href="#webstock-实时更新-createlabel-创建标签" aria-hidden="true">#</a> WebStock 实时更新 CreateLabel 创建标签</h3><h3 id="模型压缩-优化加载速度" tabindex="-1"><a class="header-anchor" href="#模型压缩-优化加载速度" aria-hidden="true">#</a> 模型压缩-优化加载速度</h3><h3 id="模型场景清除" tabindex="-1"><a class="header-anchor" href="#模型场景清除" aria-hidden="true">#</a> 模型场景清除</h3>`,27),o=[p];function c(i,l){return s(),a("div",null,o)}const r=n(e,[["render",c],["__file","Threejs and Vue可视化搭建.html.vue"]]);export{r as default};
