import{_ as t,Q as p,S as c,U as n,a4 as s,a6 as l,a7 as a,E as o}from"./framework-ca2498c6.js";const i={},r=a('<h1 id="purgecss" tabindex="-1"><a class="header-anchor" href="#purgecss" aria-hidden="true">#</a> PurgeCSS</h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>配置作用：在 vue 项目中使用，删除未使用的 CSS 代码，达到减少项目打包压缩的作用</strong></p></div><ul><li><a href="#PurgeCSS%E5%88%A0%E9%99%A4%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84CSS%E4%BB%A3%E7%A0%81">1. PurgeCSS 删除未使用的 CSS 代码</a></li></ul>',3),u={href:"https://www.purgecss.cn/",target:"_blank",rel:"noopener noreferrer"},d=a(`<h2 id="安装项目依赖" tabindex="-1"><a class="header-anchor" href="#安装项目依赖" aria-hidden="true">#</a> 安装项目依赖</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vue add @fullhuman/purgecss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装成功后会在项目创建<code>postcss.config.js</code>文件</p><h2 id="postcss-config-js-文件修改" tabindex="-1"><a class="header-anchor" href="#postcss-config-js-文件修改" aria-hidden="true">#</a> postcss.config.js 文件修改</h2><ul><li>content 字段，来告诉 PurgeCSS 去哪里查找将要对应匹配的 class</li><li>whitelist 对于一些你不想要移除的 class 或者某些标签上对应的样式名称，你可以它们加到白名单字段中。你至少需要添加 html 和 body 标签以及任意的动态 class 样式名称到白名单配置字段中</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">IN_PRODUCTION</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token constant">IN_PRODUCTION</span> <span class="token operator">&amp;&amp;</span>
      <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@fullhuman/postcss-purgecss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./public/**/*.html</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./src/**/*.vue</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./layouts/**/*.vue</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./components/**/*.vue</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./pages/**/*.vue</span><span class="token template-punctuation string">\`</span></span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">whitelist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;html&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;body&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">defaultExtractor</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> contentWithoutStyleBlocks <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
            <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;style[^]+?&lt;\\/style&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span>
            <span class="token string">&#39;&#39;</span>
          <span class="token punctuation">)</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            contentWithoutStyleBlocks<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>
              <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[A-Za-z0-9-_/:]*[A-Za-z0-9-_/]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
            <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">safelist</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-(leave|enter|appear)(|-(to|from|active))$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?!(|.*?:)cursor-move).+-move$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^router-link(|-exact)-active$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">data-v-.*</span><span class="token regex-delimiter">/</span></span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function k(g,v){const e=o("ExternalLinkIcon");return p(),c("div",null,[r,n("p",null,[s("在提高 web 性能的方法中，可以通过移除不需要的 js 和 css 达到性能提高。 PurgeCSS 是一个用来删除未使用的 CSS 代码的工具 "),n("a",u,[s("PurgeCSS"),l(e)])]),d])}const x=t(i,[["render",k],["__file","purgeCSS.html.vue"]]);export{x as default};
